{"ast":null,"code":"import _slicedToArray from\"/Users/mymac/Documents/GitHub/Cryptoapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/mymac/Documents/GitHub/Cryptoapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mymac/Documents/GitHub/Cryptoapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import Web3 from\"web3\";import{useEffect,useState}from\"react\";import{useConfig}from\"@usedapp/core\";import{ROUTER_ADDRESS}from\"../config\";import{getFactoryInfo,getRouterInfo}from\"../utils\";export var loadPools=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(providerUrl){var provider,web3,routerInfo,factoryInfo;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:provider=new Web3.providers.HttpProvider(providerUrl);web3=new Web3(provider);_context.next=4;return getRouterInfo(ROUTER_ADDRESS,web3);case 4:routerInfo=_context.sent;_context.next=7;return getFactoryInfo(routerInfo.factory,web3);case 7:factoryInfo=_context.sent;return _context.abrupt(\"return\",factoryInfo.pairsInfo);case 9:case\"end\":return _context.stop();}}},_callee);}));return function loadPools(_x){return _ref.apply(this,arguments);};}();export var usePools=function usePools(){var _useConfig=useConfig(),readOnlyChainId=_useConfig.readOnlyChainId,readOnlyUrls=_useConfig.readOnlyUrls;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),pools=_useState4[0],setPools=_useState4[1];useEffect(function(){loadPools(readOnlyUrls[readOnlyChainId]).then(function(pools){setPools(pools);setLoading(false);});},[readOnlyUrls,readOnlyChainId]);return[loading,pools];};","map":{"version":3,"names":["Web3","useEffect","useState","useConfig","ROUTER_ADDRESS","getFactoryInfo","getRouterInfo","loadPools","providerUrl","provider","providers","HttpProvider","web3","routerInfo","factory","factoryInfo","pairsInfo","usePools","readOnlyChainId","readOnlyUrls","loading","setLoading","pools","setPools","then"],"sources":["/Users/mymac/Documents/GitHub/Cryptoapp/packages/react-app/src/hooks/usePools.js"],"sourcesContent":["import Web3 from \"web3\";\nimport { useEffect, useState } from \"react\";\nimport { useConfig } from \"@usedapp/core\";\n\nimport { ROUTER_ADDRESS } from \"../config\";\nimport { getFactoryInfo, getRouterInfo } from \"../utils\";\n\nexport const loadPools = async (providerUrl) => {\n  const provider = new Web3.providers.HttpProvider(providerUrl);\n  const web3 = new Web3(provider);\n  const routerInfo = await getRouterInfo(ROUTER_ADDRESS, web3);\n  const factoryInfo = await getFactoryInfo(routerInfo.factory, web3);\n  return factoryInfo.pairsInfo;\n}\n\nexport const usePools = () => {\n  const { readOnlyChainId, readOnlyUrls } = useConfig();\n  const [loading, setLoading] = useState(true);\n  const [pools, setPools] = useState({});\n\n  useEffect(() => {\n    loadPools(readOnlyUrls[readOnlyChainId])\n        .then((pools) => {\n          setPools(pools);\n          setLoading(false);\n        });\n  }, [readOnlyUrls, readOnlyChainId]);\n\n  return [loading, pools];\n}\n"],"mappings":"uYAAA,MAAOA,KAAP,KAAiB,MAAjB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,SAAT,KAA0B,eAA1B,CAEA,OAASC,cAAT,KAA+B,WAA/B,CACA,OAASC,cAAT,CAAyBC,aAAzB,KAA8C,UAA9C,CAEA,MAAO,IAAMC,UAAS,4FAAG,iBAAOC,WAAP,6JACjBC,QADiB,CACN,GAAIT,KAAI,CAACU,SAAL,CAAeC,YAAnB,CAAgCH,WAAhC,CADM,CAEjBI,IAFiB,CAEV,GAAIZ,KAAJ,CAASS,QAAT,CAFU,uBAGEH,cAAa,CAACF,cAAD,CAAiBQ,IAAjB,CAHf,QAGjBC,UAHiB,qCAIGR,eAAc,CAACQ,UAAU,CAACC,OAAZ,CAAqBF,IAArB,CAJjB,QAIjBG,WAJiB,+CAKhBA,WAAW,CAACC,SALI,wDAAH,kBAATT,UAAS,4CAAf,CAQP,MAAO,IAAMU,SAAQ,CAAG,QAAXA,SAAW,EAAM,CAC5B,eAA0Cd,SAAS,EAAnD,CAAQe,eAAR,YAAQA,eAAR,CAAyBC,YAAzB,YAAyBA,YAAzB,CACA,cAA8BjB,QAAQ,CAAC,IAAD,CAAtC,wCAAOkB,OAAP,eAAgBC,UAAhB,eACA,eAA0BnB,QAAQ,CAAC,EAAD,CAAlC,yCAAOoB,KAAP,eAAcC,QAAd,eAEAtB,SAAS,CAAC,UAAM,CACdM,SAAS,CAACY,YAAY,CAACD,eAAD,CAAb,CAAT,CACKM,IADL,CACU,SAACF,KAAD,CAAW,CACfC,QAAQ,CAACD,KAAD,CAAR,CACAD,UAAU,CAAC,KAAD,CAAV,CACD,CAJL,EAKD,CANQ,CAMN,CAACF,YAAD,CAAeD,eAAf,CANM,CAAT,CAQA,MAAO,CAACE,OAAD,CAAUE,KAAV,CAAP,CACD,CAdM"},"metadata":{},"sourceType":"module"}